<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Proyecto Personal</title>
    <link rel="stylesheet" href="estilos.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
  </head>
  <body>
    <header class="main-header">
      <div class="buscador">
        <input
          type="text"
          id="searchInput"
          placeholder="Buscar series o películas..."
        />
        <button><i class="fas fa-search"></i></button>
      </div>
    </header>

    <div class="tipo-selector">
      <button class="tipo active" data-type="tv" title="Series">
        <i class="fas fa-tv"></i> Series
      </button>
      <button class="tipo" data-type="movie" title="Películas">
        <i class="fas fa-film"></i> Películas
      </button>
    </div>

    <main>
      <section class="categoria">
        <h3>Estrenos Recientes</h3>
        <div class="series-row">
          <div class="serie-item" data-id="986056" data-type="movie"></div>
          <div class="serie-item" data-id="822119" data-type="movie"></div>
          <div class="serie-item" data-id="533535" data-type="movie"></div>
          <div class="serie-item" data-id="609681" data-type="movie"></div>
          <div class="serie-item" data-id="447365" data-type="movie"></div>
          <div class="serie-item" data-id="640146" data-type="movie"></div>
        </div>
      </section>

      <section class="categoria">
        <h3>Vengadores</h3>
        <div class="series-row">
          <div class="serie-item" data-id="24428" data-type="movie"></div>
          <div class="serie-item" data-id="99861" data-type="movie"></div>
          <div class="serie-item" data-id="299536" data-type="movie"></div>
          <div class="serie-item" data-id="299534" data-type="movie"></div>
        </div>
      </section>

      <section class="categoria">
        <h3>Spider-Verse</h3>
        <div class="series-row">
          <div class="serie-item" data-id="569094" data-type="movie"></div>
          <div class="serie-item" data-id="324857" data-type="movie"></div>
        </div>
      </section>
    </main>

    <!-- Menú inferior -->
    <nav class="bottom-menu">
      <a href="#"><i class="fas fa-home"></i><span>Inicio</span></a>
      <a href="#"><i class="fas fa-search"></i><span>Buscar</span></a>
      <a href="#"><i class="fas fa-star"></i><span>Favoritos</span></a>
      <a href="#"><i class="fas fa-user"></i><span>Perfil</span></a>
    </nav>

    <script>
      const apiKey = "004c7616c5862f8c4a3a317fb1e1a723";

      document.querySelectorAll(".serie-item").forEach((div) => {
        const id = div.getAttribute("data-id");
        const tipo = div.getAttribute("data-type") || "tv"; // por defecto 'tv'

        const baseUrl = `https://api.themoviedb.org/3/${tipo}/${id}`;

        fetch(`${baseUrl}?api_key=${apiKey}&language=es-ES`)
          .then((res) => res.json())
          .then((data) => {
            const poster = `https://image.tmdb.org/t/p/w300${data.poster_path}`;
            const titulo = tipo === "movie" ? data.title : data.name;
            const año =
              (tipo === "movie"
                ? data.release_date
                : data.first_air_date
              )?.slice(0, 4) || "Año no disponible";

            div.innerHTML = `
          <div class="puntuacion">${data.vote_average.toFixed(1)}</div>
          <img src="${poster}" alt="${titulo}" />
          <h4>${titulo}</h4>
          <p>${año}</p>
        `;
          })
          .catch((err) => {
            div.innerHTML = "<p>Error al cargar contenido</p>";
            console.error("Error TMDB:", err);
          });
      });
    </script>
  </body>
</html>
